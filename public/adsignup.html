<!DOCTYPE html>
<html lang="en" dir="ltr">
   <head>
      <meta charset="utf-8">
      <title>Sign Up</title>
      <link rel="stylesheet" href="register.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"/>
      <script type="module" src="js/firebase-config.js"></script> <!-- Firebase config import -->
   </head>
   <body>
      <div class="login-form">
         <div class="text">
            SIGNUP
         </div>
         <form id="signup-form">
            <div class="field">
               <div class="fas fa-envelope"></div>
               <input type="email" id="email" placeholder="Email" required>
            </div>
            <div class="field">
               <div class="fas fa-lock"></div>
               <input type="password" id="password" placeholder="Password" required>
            </div>
            <button type="submit">SIGN UP</button>
            <div class="link">
               Already a member? <a href="signin.html">Login now</a>
            </div>
         </form>
      </div>
      <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-app.js"></script>
      <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-auth.js"></script>
      <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-firestore.js"></script>
      <script src="https://www.gstatic.com/firebasejs/11.1.0/firebase-storage.js"></script>

      <script type="module">
         // Importing Firebase services
         import { signup } from './js/firebase.js'; 

         // Sign-up logic
         document.getElementById('signup-form').addEventListener('submit', async function(event) {
            event.preventDefault(); // Prevent default form submission

            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;

            try {
               // Create user with Firebase Authentication
               const user = await signup(email, password);
               alert('Sign-up successful!');
               window.location.href = 'signin.html'; // Redirect to sign-in page after successful signup
            } catch (error) {
               alert('Error signing up: ' + error.message);
            }
         });
      </script>
   </body>
</html>
